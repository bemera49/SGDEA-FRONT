<section class="px-3">
  <div class="mt-4 mb-4"></div>
  <form [formGroup]="solicitudFormGroup" (ngSubmit)="onSubmit()">
    <mat-tab-group #stepper>
      <!--TAB 1-->
      <mat-tab label="Crear solicitud">
        <app-layout-section [title]="'Crear Solicitud'">
          <div class="row mt-5">
            <mat-form-field appearance="outline" class="col-12">
              <mat-label>Radicado</mat-label>
              <input matInput formControlName="radicado" placeholder="Número de radicado" disabled>
            </mat-form-field>
            <mat-form-field appearance="outline" class="col-12">
              <mat-label>Fecha Radicación</mat-label>
              <input matInput formControlName="fechaSolicitud" placeholder="Fecha Radicación" placeholder="dd/mm/aaaa">
            </mat-form-field>
            <mat-form-field appearance="outline" class="col-12">
              <mat-label>Estado</mat-label>
              <input matInput formControlName="estado" placeholder="Estado" disabled>
            </mat-form-field>
            <mat-form-field appearance="outline" class="col-12">
              <mat-label>Solicitante</mat-label>
              <input matInput formControlName="solicitante" placeholder="Nombre del solicitante" disabled>
            </mat-form-field>
            <mat-form-field appearance="outline" class="col-12">
              <mat-label>Detalle</mat-label>
              <textarea matInput formControlName="detalle" maxlength="150"></textarea>
            </mat-form-field>

            <!-- Aquí están los anexos dentro del FormGroup -->
            <div formArrayName="anexos_fisicos" class="col-12">
              <div class="row" *ngFor="let anexo of anexos_fisicos.controls; let i = index" [formGroupName]="i">
                <!-- Campo para Título del Anexo -->
                <mat-form-field appearance="outline" class="col-5">
                  <mat-label>Título del Anexo</mat-label>
                  <input matInput formControlName="titulo_anexo" maxlength="20" placeholder="Título del Anexo" required>
                </mat-form-field>

                <!-- Campo para Folios -->
                <mat-form-field appearance="outline" class="col-3">
                  <mat-label>Folios</mat-label>
                  <input matInput formControlName="folios" type="number" maxlength="10" placeholder="Folios" required>
                </mat-form-field>

                <!-- Botón para Eliminar -->
                <div class="col-4 d-flex align-items-center">
                  <button mat-button color="warn" (click)="eliminarAnexo(i)" [disabled]="anexos_fisicos.length === 1">Eliminar</button>
                </div>
              </div>
            </div>

            <!-- Botón para Agregar Anexo, siempre al final -->
            <div class="row mx-3">
              <button mat-raised-button class="mt-3 text-white bg-primary" (click)="agregarAnexo()">Agregar Anexo</button>
            </div>

          </div>

          <div class="d-flex flex-row flex-wrap justify-content-end" style="gap: 15px 15px">
            <button (click)="cancel()" mat-stroked-button class="text-primary font-weight-bold border border-primary">
              Cancelar
            </button>
            <button type="submit" [disabled]="!esFormularioValido()" mat-raised-button
              class="{{ !esFormularioValido() ? 'text-black bg-disabled ' : 'text-white bg-primary'}} px-4 "
              aria-label="Guardar solicitud">
              Guardar
            </button>
          </div>
        </app-layout-section>
      </mat-tab>
    </mat-tab-group>
  </form>
</section>
