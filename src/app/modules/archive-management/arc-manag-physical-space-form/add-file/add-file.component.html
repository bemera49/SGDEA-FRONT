<form [formGroup]="moduleForm" class="form-horizontal" (ngSubmit)="submitForm()">
    <div class="row">

        <div class="modal-header col-lg-12 col-md-12 col-sm-12 col-xs-12 mb-2">

            <h4 class="modal-title w-100" id="myModalLabel">
                <mat-label> {{ 'Incluir nueva unidad de conservación en la unidad de almacenamiento' | translate }} </mat-label>
            </h4>

            <button mat-button type="button" (click)="closeDialog()" title="{{ 'Cerrar' | translate }}" class="close pull-right" data-dismiss="alert" aria-label="Close">
                <i class="material-icons">close</i>
            </button>

        </div>

        <!-- card One -->
        <div class="modal-body">
            <div class="row">
                <p>
                    Por favor especifique el código de la unidad de conservación a incluir en la unidad de almacenamiento CX387822921
                </p>
            </div>

            <div class="row">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <mat-form-field>
                        <mat-label>{{ 'Código de la unidad de conservación *' | translate }}</mat-label>
                        <input matInput type="text" value="" formControlName="codigoUnidad" maxlength="50">
                        <mat-error *ngIf="!moduleForm.get('codigoUnidad').valid || moduleForm.get( 'codigoUnidad').touched ">
                            {{ 'El campo es obligatorio' | translate }}.
                        </mat-error>
                    </mat-form-field>
                </div>

                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <mat-form-field>
                        <mat-label>{{ 'Tipo de unidad *' | translate }}</mat-label>
                        <mat-select id="tipoUnidad" formControlName="tipoUnidad" name="tipoUnidad">
                            <mat-option *ngFor="let tipoUnidad of tiposUnidad" [value]="tipoUnidad.id">
                                {{ tipoUnidad.code }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="!moduleForm.get('tipoUnidad').valid">{{ 'El campo es obligatorio' | translate }}</mat-error>
                    </mat-form-field>
                </div>
            
            </div>

            <div class="row">
                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                    <mat-form-field>
                        <mat-label>{{ 'Tomo' | translate }}</mat-label>
                        <input matInput type="text" value="" formControlName="tomo"  maxlength="10" >
                        <mat-error *ngIf="moduleForm.get('tomo').hasError('maxlength')">
                            {{ 'Debe tener una longitud de 10 caracteres' | translate }}
                        </mat-error>
                    </mat-form-field>
                </div>

                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-6">
                    <mat-form-field>
                        <mat-label>{{ 'Frecuencia de consulta*' | translate }}</mat-label>
                        <mat-select id="tipoUnidadConservacion" formControlName="frecuenciaConsulta" name="frecuenciaConsulta">
                            <mat-option *ngFor="let frecuenciaConsultaItem of frecuenciasConsulta" [value]="frecuenciaConsultaItem.value">
                                {{ frecuenciaConsultaItem.name }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="!moduleForm.get('frecuenciaConsulta').valid">{{ 'El campo es obligatorio' | translate }}</mat-error>
                    </mat-form-field>
                </div>
            </div>

            <div class="row">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <div class="text-area">
                        <mat-label>Notas</mat-label>
                        <mat-form-field appearance="outline" class="w-100">
                            <textarea
                            matInput
                            placeholder="Escribe algo aqui..."
                            formControlName="notas"
                            maxlength="255"
                            rows="4"
                            ></textarea>
                        </mat-form-field>
                        
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                    <mat-form-field >
                        <mat-label>Código de expediente *</mat-label>
                        <input type="text" formControlName="codigoExpediente" matInput [matAutocomplete]="auto" maxlength="200" >
                        <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
                          <mat-option *ngFor="let option of filteredOptions | async " [value]="option.nombreExpediente" >
                            {{option?.nombreExpediente}}
                          </mat-option>
                        </mat-autocomplete>
                        <mat-error *ngIf="moduleForm.get('codigoExpediente').invalid">
                            Código de expediente es requerido.
                        </mat-error>
                      </mat-form-field>
                </div>
            </div>
        </div>
        <!-- End card One -->

    </div>


    <div mat-dialog-actions style="display:flex;justify-content: center;gap: 10px">
        <button class="btn bg-primary text-white rounded border-0 py-3 px-5" type="submit" [disabled]="isSaving">Guardar</button>
        <button class="btn bg-white border border-primary rounded py-3 px-5 text-primary"  type="button" (click)="closeDialog()">Cancelar</button>
    </div>
</form>